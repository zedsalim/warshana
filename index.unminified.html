<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>سَرَيان | Sarayan - تحفيظ القرآن الكريم</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/imgs/favicon.ico" />

    <!-- Bootstrap RTL CSS -->
    <link href="assets/css/bootstrap.rtl.min.css" rel="stylesheet" />

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="assets/css/bootstrap-icons.css" />

    <!-- Custom CSS -->
    <!-- <link rel="stylesheet" href="assets/css/styles.min.css" /> -->
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <div class="container-fluid h-100 p-0">
      <div class="row g-0 h-100">
        <!-- Offcanvas Sidebar -->
        <div
          class="offcanvas offcanvas-start"
          tabindex="-1"
          id="offcanvasSidebar"
          aria-labelledby="offcanvasSidebarLabel"
        >
          <div class="offcanvas-header px-4 py-3">
            <img
              src="assets/imgs/logo.png"
              alt="وَرْشَنَا"
              height="40"
              id="offcanvasSidebarLabel"
            />
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>

          <div class="offcanvas-body px-4 py-3 overflow-auto">
            <div class="mb-3">
              <label for="surah-select" class="form-label">السورة</label>
              <select id="surah-select" class="form-select"></select>
            </div>

            <div class="mb-3">
              <label for="juz-select" class="form-label">الجزء</label>
              <select id="juz-select" class="form-select"></select>
            </div>

            <div class="mb-3">
              <label for="page-select" class="form-label">الصفحة</label>
              <select id="page-select" class="form-select"></select>
            </div>

            <div class="mb-3">
              <label for="ayah-select" class="form-label">الآية</label>
              <select id="ayah-select" class="form-select"></select>
            </div>

            <div class="mb-3">
              <label for="riwaya-select" class="form-label">الرواية</label>
              <select id="riwaya-select" class="form-select">
                <option value="warsh">ورش عن نافع</option>
                <option value="hafs">حفص عن عاصم</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="reciter-select" class="form-label">القارئ</label>
              <select id="reciter-select" class="form-select">
                <option value="">اختر القارئ</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="speed-control" class="form-label">سرعة التشغيل</label>
              <select id="speed-control" class="form-select">
                <option value="0.5">0.5x</option>
                <option value="0.75">0.75x</option>
                <option value="1" selected>1x</option>
                <option value="1.25">1.25x</option>
                <option value="1.5">1.5x</option>
                <option value="2">2x</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="repeat-control" class="form-label">التكرار</label>
              <select id="repeat-control" class="form-select">
                <option value="1" selected>مرة واحدة</option>
                <option value="2">مرتين</option>
                <option value="4">أربع مرات</option>
                <option value="5">خمس مرات</option>
                <option value="infinite">دائماً</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="play-mode" class="form-label">وضع التشغيل</label>
              <select id="play-mode" class="form-select">
                <option value="aya" selected>آية</option>
                <option value="page">صفحة</option>
                <option value="sura">سورة</option>
                <option value="juz">جزء</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="font-size-control" class="form-label">حجم الخط</label>
              <select id="font-size-control" class="form-select">
                <option value="20">صغير جداً</option>
                <option value="24">صغير</option>
                <option value="28" selected>متوسط</option>
                <option value="32">كبير</option>
                <option value="36">كبير جداً</option>
                <option value="40">ضخم</option>
              </select>
            </div>

            <div class="d-grid gap-2 mb-3">
              <button id="play-btn" class="btn btn-custom">
                <i class="bi bi-play-fill"></i> تشغيل
              </button>
              <button id="pause-btn" class="btn btn-custom">
                <i class="bi bi-pause-fill"></i> إيقاف مؤقت
              </button>
              <button id="stop-btn" class="btn btn-custom">
                <i class="bi bi-stop-fill"></i> إيقاف
              </button>
            </div>

            <div class="mt-3">
              <audio id="audio-player" class="w-100 rounded" controls></audio>
            </div>
          </div>
        </div>

        <!-- Main Content -->
        <main class="col-12 main-content">
          <!-- Header -->
          <div class="header">
            <div class="container-fluid">
              <div class="row align-items-center g-0">
                <div class="col">
                  <div class="d-flex align-items-center justify-content-center">
                    <button id="prev-page" class="nav-btn me-3">
                      <i class="bi bi-chevron-right"></i>
                    </button>
                    <div class="text-center page-info-wrapper flex-grow-1">
                      <h3 id="sura-title" class="mb-1 fw-bold"></h3>
                      <p id="page-info" class="mb-0"></p>
                      <button
                        id="riwaya-badge"
                        class="riwaya-badge"
                        onclick="cycleRiwaya()"
                        title="تغيير الرواية"
                      >
                        ورش
                      </button>
                    </div>
                    <button id="next-page" class="nav-btn ms-3">
                      <i class="bi bi-chevron-left"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quran Text -->
          <div class="quran-text-container">
            <div class="container-fluid">
              <div class="row justify-content-center">
                <div class="col-12 col-lg-11 col-xl-10">
                  <div id="quran-text" class="quran-text"></div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Bottom Controls Bar -->
    <div class="bottom-controls" id="bottom-controls">
      <button
        class="ctrl-btn speed-btn"
        onclick="changeSpeed(-1)"
        title="تقليل السرعة"
      >
        <i class="bi bi-dash-lg"></i>
      </button>
      <span class="speed-label" id="bottom-speed-label">1x</span>
      <button
        class="ctrl-btn speed-btn"
        onclick="changeSpeed(1)"
        title="زيادة السرعة"
      >
        <i class="bi bi-plus-lg"></i>
      </button>

      <div class="ctrl-divider"></div>

      <button
        class="ctrl-btn"
        onclick="bottomNavPrevSurah()"
        title="السورة السابقة"
      >
        <i class="bi bi-chevron-double-right"></i>
      </button>
      <button class="ctrl-btn" onclick="bottomNavPrev()" title="الآية السابقة">
        <i class="bi bi-skip-end-fill"></i>
      </button>

      <button
        class="ctrl-btn ctrl-btn--primary"
        onclick="bottomPlayPause()"
        id="bottom-play-pause"
        title="تشغيل / إيقاف مؤقت"
      >
        <i class="bi bi-play-fill" id="bottom-play-icon"></i>
      </button>
      <button class="ctrl-btn" onclick="stopAudio()" title="إيقاف">
        <i class="bi bi-stop-fill"></i>
      </button>

      <button class="ctrl-btn" onclick="bottomNavNext()" title="الآية التالية">
        <i class="bi bi-skip-start-fill"></i>
      </button>
      <button
        class="ctrl-btn"
        onclick="bottomNavNextSurah()"
        title="السورة التالية"
      >
        <i class="bi bi-chevron-double-left"></i>
      </button>
    </div>

    <!-- Magharibi Style Modal -->
    <div
      class="modal fade"
      id="warshInfoModal"
      tabindex="-1"
      aria-labelledby="warshInfoModalLabel"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
    >
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content warsh-modal-content">
          <div class="modal-header warsh-modal-header border-0 py-3 px-4">
            <h5
              class="modal-title fw-bold text-white fs-4"
              id="warshInfoModalLabel"
            >
              تنبيه حول الخط المغربي
            </h5>
          </div>

          <div class="modal-body d-flex flex-column gap-3 p-4">
            <div class="warsh-card rounded-3 border p-3">
              <h6
                class="warsh-card-title fw-bold fs-5 mb-2 d-flex align-items-center gap-2"
              >
                <span class="warsh-dot warsh-dot-brown"></span>
                الخط في ورش لماذا يبدو مختلفاً؟
              </h6>
              <p class="fs-5 lh-lg mb-3">
                يعتمد هذا الموقع الخطَّ <strong>العثماني المغربي</strong> لعرض
                نص ورش، وهو خط أصيل له قواعد مختلفة عن الخط المشرقي المعهود:
              </p>

              <div class="row g-2 mb-3">
                <div class="col-4">
                  <div
                    class="warsh-letter-card rounded-2 border text-center py-3 px-1"
                  >
                    <div class="warsh-letter-demo warsh-font">ڧ</div>
                    <div class="warsh-letter-label mt-2 fs-5">
                      قاف بنقطة واحدة فوق
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div
                    class="warsh-letter-card rounded-2 border text-center py-3 px-1"
                  >
                    <div class="warsh-letter-demo warsh-font">ڢ</div>
                    <div class="warsh-letter-label mt-2 fs-5">
                      فاء بنقطة واحدة تحت
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div
                    class="warsh-letter-card rounded-2 border text-center py-3 px-1"
                  >
                    <div class="warsh-letter-demo warsh-font">ن</div>
                    <div class="warsh-letter-label mt-2 fs-5">
                      نون في آخر الكلمة بدون نقطة أحياناً
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="warsh-card warsh-card-trust rounded-3 border p-3">
              <h6
                class="warsh-card-title fw-bold fs-5 mb-2 d-flex align-items-center gap-2"
              >
                <span class="warsh-dot warsh-dot-gold"></span>
                مصدر الخط
              </h6>
              <p class="fs-5 lh-lg mb-0">
                الخط المستخدم في هذا الموقع مقدَّم من
                <a
                  href="https://qurancomplex.gov.sa/quran-dev/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="warsh-link fw-bold"
                >
                  مجمع الملك فهد لطباعة المصحف الشريف
                </a>
              </p>
            </div>
          </div>

          <div class="modal-footer warsh-modal-footer border-top px-4 py-3">
            <div
              class="d-flex flex-column gap-1 flex-grow-1"
              style="min-width: 150px"
            >
              <div
                class="warsh-progress-track rounded-pill overflow-hidden"
                style="height: 6px"
              >
                <div
                  class="warsh-progress-bar rounded-pill"
                  id="warshProgressBar"
                ></div>
              </div>
              <span class="small warsh-timer-label" id="warshTimerLabel">
                انتظر <span id="warshCountdown">5</span>ث
              </span>
            </div>
            <button
              type="button"
              class="btn warsh-close-btn disabled fw-bold fs-6 px-4 py-2 rounded-3"
              id="warshCloseBtn"
              data-bs-dismiss="modal"
            >
              فهمتُ، أكمل القراءة
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Floating Menu Button -->
    <button
      class="fab-menu-btn"
      type="button"
      data-bs-toggle="offcanvas"
      data-bs-target="#offcanvasSidebar"
      aria-controls="offcanvasSidebar"
      title="القائمة"
    >
      <i class="bi bi-list"></i>
    </button>

    <!-- Floating Fullscreen Enter Button -->
    <button
      class="fab-fullscreen-btn fab-fullscreen-enter"
      onclick="toggleFullscreen()"
      title="ملء الشاشة"
    >
      <i class="bi bi-fullscreen"></i>
    </button>

    <!-- Floating Fullscreen Exit Button -->
    <button
      class="fab-fullscreen-btn fab-fullscreen-exit"
      onclick="toggleFullscreen()"
      title="إنهاء ملء الشاشة"
    >
      <i class="bi bi-fullscreen-exit"></i>
    </button>

    <!-- Bootstrap JS Bundle -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>

    <!-- Custom Script -->
    <!-- <script src="assets/js/script.min.js"></script> -->
    <script src="assets/js/script.js"></script>
  </body>
</html>
